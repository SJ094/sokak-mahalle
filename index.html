<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Sokak adƒ±nƒ± s√∂yleyin, yazƒ±n veya fotoƒüraflayƒ±n - mahallesini √∂ƒürenin">
  <meta name="theme-color" content="#FF6000">
  <title>Sokak Mahalle Bulucu Pro</title>
  
  <!-- Tesseract.js OCR k√ºt√ºphanesi -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tesseract.js/4.1.1/tesseract.min.js"></script>
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 1rem;
      position: relative;
      overflow-x: hidden;
    }
    
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><defs><pattern id="grid" width="100" height="100" patternUnits="userSpaceOnUse"><path d="M 100 0 L 0 0 0 100" fill="none" stroke="rgba(255,255,255,0.03)" stroke-width="1"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
      pointer-events: none;
    }
    
    .container {
      max-width: 600px;
      margin: 2rem auto;
      position: relative;
      z-index: 1;
    }
    
    .header {
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(10px);
      border-radius: 1.5rem;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      padding: 2.5rem;
      text-align: center;
      border: 1px solid rgba(255,255,255,0.5);
      margin-bottom: 1.5rem;
    }
    
    .icon-container {
      width: 80px;
      height: 80px;
      margin: 0 auto 1.5rem;
      background: linear-gradient(135deg, #FF6000 0%, #FF8C42 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 10px 30px rgba(255, 96, 0, 0.3);
    }
    
    .icon {
      width: 45px;
      height: 45px;
      color: white;
    }
    
    h1 {
      font-size: 2rem;
      background: linear-gradient(135deg, #2D2D2D 0%, #1A1A1A 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 0.5rem;
      font-weight: 800;
      letter-spacing: -0.5px;
    }
    
    .subtitle {
      color: #6B7280;
      font-size: 1rem;
    }
    
    .main {
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(10px);
      border-radius: 1.5rem;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      padding: 2rem;
      border: 1px solid rgba(255,255,255,0.5);
      margin-bottom: 1.5rem;
    }
    
    label {
      display: block;
      font-weight: 600;
      color: #374151;
      margin-bottom: 0.75rem;
      font-size: 0.95rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    input {
      width: 100%;
      padding: 1rem 1.25rem;
      font-size: 1.1rem;
      border: 2px solid #E5E7EB;
      border-radius: 0.75rem;
      margin-bottom: 1.25rem;
      transition: all 0.3s;
      background: #F9FAFB;
    }
    
    input:focus {
      outline: none;
      border-color: #FF6000;
      background: white;
      box-shadow: 0 0 0 4px rgba(255, 96, 0, 0.1);
      transform: translateY(-2px);
    }
    
    .buttons {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.75rem;
      margin-bottom: 1rem;
    }
    
    button {
      padding: 1rem 1.5rem;
      border: none;
      border-radius: 0.75rem;
      font-weight: 600;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }
    
    .btn-search {
      background: linear-gradient(135deg, #2D2D2D 0%, #1A1A1A 100%);
      color: white;
      grid-column: 1 / -1;
    }
    
    .btn-search:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(0,0,0,0.3);
    }
    
    .btn-search:active {
      transform: translateY(0);
    }
    
    .btn-voice {
      background: linear-gradient(135deg, #FF6000 0%, #FF8C42 100%);
      color: white;
    }
    
    .btn-voice:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(255, 96, 0, 0.4);
    }
    
    .btn-voice.listening {
      animation: pulse 1.5s infinite;
    }
    
    .btn-camera {
      background: linear-gradient(135deg, #8B5CF6 0%, #7C3AED 100%);
      color: white;
    }
    
    .btn-camera:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(139, 92, 246, 0.4);
    }
    
    .btn-camera.processing {
      animation: pulse 1.5s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; transform: scale(1) translateY(0); }
      50% { opacity: 0.8; transform: scale(1.05) translateY(-2px); }
    }
    
    .btn-clear {
      background: #F3F4F6;
      color: #374151;
      grid-column: 1 / -1;
    }
    
    .btn-clear:hover {
      background: #E5E7EB;
      transform: translateY(-2px);
    }
    
    .result {
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(10px);
      border-radius: 1.5rem;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      padding: 2rem;
      margin-bottom: 1.5rem;
      border: 1px solid rgba(255,255,255,0.5);
    }
    
    .result-box {
      border-radius: 1rem;
      padding: 1.5rem;
      border: 2px solid;
    }
    
    .result-success {
      background: linear-gradient(135deg, #ECFDF5 0%, #D1FAE5 100%);
      border-color: #10B981;
    }
    
    .result-error {
      background: linear-gradient(135deg, #FEF2F2 0%, #FEE2E2 100%);
      border-color: #EF4444;
    }
    
    .result-warning {
      background: linear-gradient(135deg, #FFFBEB 0%, #FEF3C7 100%);
      border-color: #F59E0B;
    }
    
    .result-listening {
      background: linear-gradient(135deg, #EFF6FF 0%, #DBEAFE 100%);
      border-color: #3B82F6;
    }
    
    .result-processing {
      background: linear-gradient(135deg, #F5F3FF 0%, #EDE9FE 100%);
      border-color: #8B5CF6;
    }
    
    .result-title {
      font-size: 1.2rem;
      font-weight: 700;
      margin-bottom: 0.75rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .success-title { color: #059669; }
    .error-title { color: #DC2626; }
    .warning-title { color: #D97706; }
    .listening-title { color: #2563EB; }
    .processing-title { color: #7C3AED; }
    
    .sokak-name {
      color: #FF6000;
      font-weight: 600;
      font-size: 1.1rem;
    }
    
    .mahalle-name {
      font-size: 2rem;
      font-weight: 800;
      background: linear-gradient(135deg, #2D2D2D 0%, #FF6000 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-top: 0.75rem;
    }
    
    .list {
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(10px);
      border-radius: 1.5rem;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      padding: 2rem;
      border: 1px solid rgba(255,255,255,0.5);
    }
    
    .list-title {
      font-size: 1.2rem;
      font-weight: 700;
      color: #2D2D2D;
      margin-bottom: 1.25rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .list-item {
      background: linear-gradient(135deg, #FAFAFA 0%, #F5F5F5 100%);
      border: 2px solid #E5E7EB;
      border-radius: 0.75rem;
      padding: 1.25rem;
      margin-bottom: 0.75rem;
      transition: all 0.3s;
      cursor: pointer;
    }
    
    .list-item:hover {
      border-color: #FF6000;
      background: white;
      transform: translateX(8px);
      box-shadow: 0 4px 12px rgba(255, 96, 0, 0.15);
    }
    
    .list-sokak {
      font-weight: 700;
      color: #FF6000;
      text-transform: capitalize;
      font-size: 1.05rem;
    }
    
    .list-mahalle {
      color: #6B7280;
      font-size: 0.95rem;
      margin-top: 0.35rem;
    }
    
    .logo-container {
      position: fixed;
      bottom: 25px;
      right: 25px;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      padding: 1rem 1.5rem;
      border-radius: 1rem;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      z-index: 1000;
      border: 1px solid rgba(255,255,255,0.5);
    }
    
    .logo-trendyol {
      font-family: Arial, sans-serif;
      font-weight: bold;
      line-height: 1.2;
      margin-bottom: 5px;
    }
    
    .logo-trendyol-main {
      color: #000;
      font-size: 24px;
      letter-spacing: -1px;
    }
    
    .logo-trendyol-express {
      color: #FF6000;
      font-size: 20px;
      letter-spacing: -0.5px;
    }
    
    .logo-subtitle {
      color: #6B7280;
      font-size: 11px;
      font-weight: 600;
      margin-top: 2px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .hidden {
      display: none;
    }
    
    /* Kamera input gizle */
    #cameraInput {
      display: none;
    }
    
    .progress-bar {
      width: 100%;
      height: 6px;
      background: #E5E7EB;
      border-radius: 3px;
      overflow: hidden;
      margin-top: 1rem;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #8B5CF6, #7C3AED);
      width: 0%;
      transition: width 0.3s;
      animation: shimmer 1.5s infinite;
    }
    
    @keyframes shimmer {
      0% { background-position: -100% 0; }
      100% { background-position: 100% 0; }
    }
    
    .preview-container {
      margin-top: 1rem;
      border-radius: 0.75rem;
      overflow: hidden;
      max-height: 300px;
      border: 2px solid #E5E7EB;
    }
    
    .preview-container img {
      width: 100%;
      height: auto;
      display: block;
    }

    @media (max-width: 640px) {
      h1 {
        font-size: 1.5rem;
      }
      
      .logo-container {
        bottom: 15px;
        right: 15px;
        padding: 0.75rem 1rem;
      }
      
      .logo-trendyol-main {
        font-size: 20px;
      }
      
      .logo-trendyol-express {
        font-size: 16px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Ba≈ülƒ±k -->
    <div class="header">
      <div class="icon-container">
        <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
        </svg>
      </div>
      <h1>Sokak Mahalle Bulucu</h1>
      <p class="subtitle">Yazƒ±n ‚Ä¢ S√∂yleyin ‚Ä¢ Fotoƒüraflayƒ±n</p>
    </div>

    <!-- Ana B√∂l√ºm -->
    <div class="main">
      <label>üîç Sokak Adƒ±</label>
      <input type="text" id="sokakInput" placeholder="√ñrn: Yemeni Sokak">
      
      <div class="buttons">
        <button class="btn-search" onclick="ara()">
          <span>üîç</span>
          <span>Ara</span>
        </button>
        <button class="btn-voice" id="voiceBtn" onclick="sesliAra()">
          <span>üé§</span>
          <span>Sesli</span>
        </button>
        <button class="btn-camera" id="cameraBtn" onclick="kameraAc()">
          <span>üì∏</span>
          <span>Kamera</span>
        </button>
        <button class="btn-clear" onclick="temizle()">Temizle</button>
      </div>
      
      <input type="file" id="cameraInput" accept="image/*" capture="environment" onchange="fotografOku(event)">
      <div id="previewContainer"></div>
    </div>

    <!-- Sonu√ß -->
    <div id="result" class="result hidden"></div>

    <!-- Kayƒ±tlƒ± Sokaklar -->
    <div class="list">
      <div class="list-title">
        <span>üìç</span>
        <span>Kayƒ±tlƒ± Sokaklar</span>
      </div>
      <div id="sokakListesi"></div>
    </div>
  </div>

  <!-- Logo - Saƒü Alt -->
  <div class="logo-container">
    <div class="logo-trendyol">
      <div class="logo-trendyol-main">trendyol</div>
      <div class="logo-trendyol-express">express</div>
    </div>
    <div class="logo-subtitle">UZUN ≈ûUBE AI</div>
  </div>

  <script>
    // Sokak veritabanƒ±
    const sokaklar = {
      'yemeni sokak': 'Ertuƒürul Gazi Mahallesi',
      '√ßayƒ±r sokak': 'Dumlupƒ±nar Mahallesi',
      'sekbanlƒ± sokak': 'Ataevler Mahallesi',
      'g√∂ksun sokak': 'ƒ∞stasyon Mahallesi',
      'cami sokak': 'Tepecik Mahallesi',
      'atat√ºrk caddesi': 'Merkez Mahallesi',
      'istiklal caddesi': 'Cumhuriyet Mahallesi',
      'bah√ßelievler sokak': 'Bah√ßelievler Mahallesi',
      'ku≈üdili sokak': 'G√∂ztepe Mahallesi',
      'barbaros bulvarƒ±': 'Be≈üikta≈ü Mahallesi'
    };

    let dinliyor = false;

    // Enter tu≈üuyla arama
    document.getElementById('sokakInput').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') ara();
    });

    // Arama fonksiyonu
    function ara() {
      const input = document.getElementById('sokakInput').value;
      const aranan = input.toLowerCase().trim();

      if (!aranan) {
        gosterSonuc('error', '‚ö†Ô∏è Uyarƒ±', 'L√ºtfen bir sokak adƒ± girin!');
        sesliSoyle('L√ºtfen bir sokak adƒ± girin');
        return;
      }

      const mahalle = sokaklar[aranan];

      if (mahalle) {
        gosterSonuc('success', '‚úÖ Bulundu!', 
          `<div class="sokak-name">${input}</div><div class="mahalle-name">${mahalle}</div>`);
        // Sesli yanƒ±t - mahalle adƒ±nƒ± s√∂yle
        sesliSoyle(mahalle);
      } else {
        gosterSonuc('warning', '‚ö†Ô∏è Bulunamadƒ±', 'Bu sokak veritabanƒ±nda bulunamadƒ±.');
        sesliSoyle('Bu sokak veritabanƒ±nda bulunamadƒ±');
      }
    }

    // Sesli konu≈üma fonksiyonu - GELƒ∞≈ûTƒ∞Rƒ∞LMƒ∞≈û
    function sesliSoyle(metin) {
      // √ñnceki konu≈ümalarƒ± iptal et
      window.speechSynthesis.cancel();
      
      const utterance = new SpeechSynthesisUtterance(metin);
      utterance.lang = 'tr-TR';
      utterance.rate = 1.0;
      utterance.pitch = 1.0;
      utterance.volume = 1.0;
      
      // Sesler y√ºklendikten sonra konu≈ü
      if (window.speechSynthesis.getVoices().length > 0) {
        const turkishVoice = window.speechSynthesis.getVoices().find(voice => voice.lang === 'tr-TR');
        if (turkishVoice) {
          utterance.voice = turkishVoice;
        }
      }
      
      window.speechSynthesis.speak(utterance);
    }

    // Sesli arama - GELƒ∞≈ûTƒ∞Rƒ∞LMƒ∞≈û
    function sesliAra() {
      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      
      if (!SpeechRecognition) {
        gosterSonuc('error', '‚ùå Uyarƒ±', 'Tarayƒ±cƒ±nƒ±z ses tanƒ±mayƒ± desteklemiyor. L√ºtfen Chrome veya Edge kullanƒ±n.');
        sesliSoyle('Tarayƒ±cƒ±nƒ±z ses tanƒ±mayƒ± desteklemiyor');
        return;
      }

      const recognition = new SpeechRecognition();
      recognition.lang = 'tr-TR';
      recognition.continuous = false;
      recognition.interimResults = false;

      const voiceBtn = document.getElementById('voiceBtn');

      recognition.onstart = () => {
        dinliyor = true;
        voiceBtn.classList.add('listening');
        voiceBtn.innerHTML = '<span>üî¥</span><span>Dinliyor...</span>';
        gosterSonuc('listening', 'üé§ Dinliyorum', 'Sokak adƒ±nƒ± s√∂yleyin...');
        sesliSoyle('Dinliyorum');
      };

      recognition.onresult = (event) => {
        const sesliBilgi = event.results[0][0].transcript;
        document.getElementById('sokakInput').value = sesliBilgi;
        
        const aranan = sesliBilgi.toLowerCase().trim();
        const mahalle = sokaklar[aranan];

        if (mahalle) {
          gosterSonuc('success', '‚úÖ Bulundu!', 
            `<div class="sokak-name">${sesliBilgi}</div><div class="mahalle-name">${mahalle}</div>`);
          // Sesli cevap - mahalle adƒ±nƒ± s√∂yle
          sesliSoyle(mahalle);
        } else {
          gosterSonuc('warning', '‚ö†Ô∏è Bulunamadƒ±', 'Bu sokak veritabanƒ±nda bulunamadƒ±.');
          sesliSoyle('Bulunamadƒ±');
        }
      };

      recognition.onerror = () => {
        gosterSonuc('error', '‚ùå Hata', 'Ses tanƒ±ma hatasƒ±. L√ºtfen tekrar deneyin.');
        sesliSoyle('Ses tanƒ±ma hatasƒ±');
      };

      recognition.onend = () => {
        dinliyor = false;
        voiceBtn.classList.remove('listening');
        voiceBtn.innerHTML = '<span>üé§</span><span>Sesli</span>';
      };

      recognition.start();
    }

    // YENƒ∞: Kamera a√ß
    function kameraAc() {
      document.getElementById('cameraInput').click();
    }

    // YENƒ∞: Fotoƒüraf oku (OCR)
    function fotografOku(event) {
      const file = event.target.files[0];
      if (!file) return;

      const cameraBtn = document.getElementById('cameraBtn');
      cameraBtn.classList.add('processing');
      cameraBtn.innerHTML = '<span>‚è≥</span><span>ƒ∞≈üleniyor...</span>';

      // √ñnizleme g√∂ster
      const reader = new FileReader();
      reader.onload = function(e) {
        const previewContainer = document.getElementById('previewContainer');
        previewContainer.innerHTML = `<div class="preview-container"><img src="${e.target.result}" alt="Fotoƒüraf"></div>`;
      };
      reader.readAsDataURL(file);

      gosterSonuc('processing', 'üì∏ ƒ∞≈üleniyor', 
        'Fotoƒüraf analiz ediliyor...<div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>');

      // OCR i≈ülemi
      Tesseract.recognize(
        file,
        'tur', // T√ºrk√ße dil
        {
          logger: (m) => {
            if (m.status === 'recognizing text') {
              const progress = Math.round(m.progress * 100);
              const progressFill = document.getElementById('progressFill');
              if (progressFill) {
                progressFill.style.width = progress + '%';
              }
            }
          }
        }
      ).then(({ data: { text } }) => {
        cameraBtn.classList.remove('processing');
        cameraBtn.innerHTML = '<span>üì∏</span><span>Kamera</span>';

        // Metni temizle ve normalize et
        const temizMetin = text.toLowerCase()
          .replace(/[^\w≈üƒü√º√∂√ßƒ±ƒ∞\s]/g, '')
          .trim();

        console.log('OCR Sonucu:', temizMetin);

        // Sokak veritabanƒ±nda ara
        let bulundu = false;
        for (const [sokak, mahalle] of Object.entries(sokaklar)) {
          if (temizMetin.includes(sokak) || sokak.includes(temizMetin)) {
            document.getElementById('sokakInput').value = sokak;
            gosterSonuc('success', '‚úÖ Bulundu!', 
              `<div class="sokak-name">${sokak}</div><div class="mahalle-name">${mahalle}</div>`);
            sesliSoyle(mahalle);
            bulundu = true;
            break;
          }
        }

        if (!bulundu) {
          gosterSonuc('warning', '‚ö†Ô∏è Bulunamadƒ±', 
            `Fotoƒüraftan okunan metin: "${temizMetin}"<br><br>Bu sokak veritabanƒ±nda bulunamadƒ±.`);
          sesliSoyle('Sokak bulunamadƒ±');
        }
      }).catch(err => {
        console.error('OCR Hatasƒ±:', err);
        cameraBtn.classList.remove('processing');
        cameraBtn.innerHTML = '<span>üì∏</span><span>Kamera</span>';
        gosterSonuc('error', '‚ùå Hata', 'Fotoƒüraf okunamadƒ±. L√ºtfen daha net bir fotoƒüraf √ßekin.');
        sesliSoyle('Fotoƒüraf okunamadƒ±');
      });
    }

    // Temizle
    function temizle() {
      document.getElementById('sokakInput').value = '';
      document.getElementById('result').classList.add('hidden');
      document.getElementById('previewContainer').innerHTML = '';
      document.getElementById('cameraInput').value = '';
    }

    // Sonu√ß g√∂ster
    function gosterSonuc(tip, baslik, mesaj) {
      const resultDiv = document.getElementById('result');
      const tipClass = `result-${tip}`;
      const titleClass = `${tip}-title`;

      resultDiv.innerHTML = `
        <div class="result-box ${tipClass}">
          <div class="result-title ${titleClass}">${baslik}</div>
          <div>${mesaj}</div>
        </div>
      `;
      resultDiv.classList.remove('hidden');
    }

    // Sokak listesini olu≈ütur
    function sokakListesiOlustur() {
      const liste = document.getElementById('sokakListesi');
      Object.entries(sokaklar).forEach(([sokak, mahalle]) => {
        const item = document.createElement('div');
        item.className = 'list-item';
        item.innerHTML = `
          <div class="list-sokak">${sokak}</div>
          <div class="list-mahalle">${mahalle}</div>
        `;
        item.onclick = () => {
          document.getElementById('sokakInput').value = sokak;
          ara();
        };
        liste.appendChild(item);
      });
    }

    // Sayfa y√ºklendiƒüinde
    window.onload = function() {
      sokakListesiOlustur();
      
      // Ses sentezini hazƒ±rla
      window.speechSynthesis.getVoices();
    };

    // Ses
