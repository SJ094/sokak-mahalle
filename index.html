<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Sokak adƒ±nƒ± s√∂yleyin veya yazƒ±n, mahallesini √∂ƒürenin">
  <meta name="theme-color" content="#4F46E5">
  <title>Sokak Mahalle Bulucu</title>
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: linear-gradient(135deg, #F5F5F5 0%, #E8E8E8 50%, #FAFAFA 100%);
      min-height: 100vh;
      padding: 1rem;
    }
    
    .container {
      max-width: 500px;
      margin: 2rem auto;
    }
    
    .header {
      background: white;
      border-radius: 1rem 1rem 0 0;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      padding: 2rem;
      text-align: center;
      border-bottom: 3px solid #FF6000;
    }
    
    .icon {
      width: 60px;
      height: 60px;
      margin: 0 auto 1rem;
      color: #FF6000;
    }
    
    h1 {
      font-size: 1.5rem;
      color: #2D2D2D;
      margin-bottom: 0.5rem;
      font-weight: 700;
    }
    
    .subtitle {
      color: #6B7280;
    }
    
    .main {
      background: white;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      padding: 1rem 1.5rem;
    }
    
    label {
      display: block;
      font-weight: 600;
      color: #374151;
      margin-bottom: 0.4rem;
      font-size: 1rem;
    }
    
    input {
      width: 100%;
      padding: 0.5rem 0.75rem;
      font-size: 1.05rem;
      border: 1.5px solid #E0E0E0;
      border-radius: 0.5rem;
      margin-bottom: 0.75rem;
      transition: all 0.3s;
      background: #FAFAFA;
    }
    
    input:focus {
      outline: none;
      border-color: #FF6000;
      background: white;
      box-shadow: 0 0 0 2px rgba(255, 96, 0, 0.1);
    }
    
    .buttons {
      display: flex;
      gap: 0.75rem;
    }
    
    button {
      padding: 0.5rem 1.1rem;
      border: none;
      border-radius: 0.5rem;
      font-weight: 600;
      font-size: 1rem;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .btn-search {
      flex: 1;
      background: #2D2D2D;
      color: white;
    }
    
    .btn-search:hover {
      background: #1A1A1A;
      transform: translateY(-1px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    }
    
    .btn-voice {
      background: #FF6000;
      color: white;
      padding: 0.5rem 1rem;
    }
    
    .btn-voice:hover {
      background: #E55500;
      transform: translateY(-1px);
      box-shadow: 0 4px 8px rgba(255, 96, 0, 0.3);
    }
    
    .btn-voice.listening {
      background: #FF6000;
      animation: pulse 1.5s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.8; transform: scale(1.05); }
    }
    
    .btn-clear {
      background: #E5E7EB;
      color: #374151;
      padding: 0.5rem 1rem;
    }
    
    .btn-clear:hover {
      background: #D1D5DB;
    }
    
    .result {
      background: white;
      border-radius: 0 0 1rem 1rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      padding: 2rem;
      margin-top: 0.25rem;
      border-left: 4px solid #FF6000;
    }
    
    .result-box {
      border-radius: 0.5rem;
      padding: 1.5rem;
      border: 2px solid;
    }
    
    .result-success {
      background: #F0FDF4;
      border-color: #22C55E;
    }
    
    .result-error {
      background: #FEF2F2;
      border-color: #EF4444;
    }
    
    .result-warning {
      background: #FFFBEB;
      border-color: #FF6000;
    }
    
    .result-listening {
      background: #F0F9FF;
      border-color: #FF6000;
    }
    
    .result-title {
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }
    
    .success-title { color: #16A34A; }
    .error-title { color: #DC2626; }
    .warning-title { color: #FF6000; }
    .listening-title { color: #FF6000; }
    
    .sokak-name {
      color: #FF6000;
      font-weight: 600;
    }
    
    .mahalle-name {
      font-size: 1.5rem;
      font-weight: 700;
      color: #2D2D2D;
      margin-top: 0.5rem;
    }
    
    .mahalle-section {
      background: white;
      border-radius: 1rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      padding: 2rem;
      margin-top: 1.5rem;
      border-top: 3px solid #FF6000;
    }

    .mahalle-section-title {
      font-size: 1.2rem;
      font-weight: 700;
      color: #2D2D2D;
      margin-bottom: 1rem;
    }

    .mahalle-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .btn-mahalle {
      background: #FAFAFA;
      border: 2px solid #E0E0E0;
      border-radius: 2rem;
      padding: 0.5rem 1rem;
      font-size: 1rem;
      font-weight: 600;
      color: #374151;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-mahalle:not([class*="btn-mahalle-"]):hover {
      border-color: #FF6000;
      color: #FF6000;
      background: white;
    }

    .btn-mahalle.active {
      background: #FF6000;
      border-color: #FF6000;
      color: white;
    }

    /* Grup renkleri */
    .btn-mahalle-gri { border-color: #9CA3AF; color: #4B5563; }
    .btn-mahalle-gri:hover, .btn-mahalle-gri.active { background: #9CA3AF; border-color: #9CA3AF; color: white; }

    .btn-mahalle-yesil { border-color: #15803D; color: #14532D; }
    .btn-mahalle-yesil:hover, .btn-mahalle-yesil.active { background: #15803D; border-color: #15803D; color: white; }

    .btn-mahalle-kirmizi { border-color: #EF4444; color: #DC2626; }
    .btn-mahalle-kirmizi:hover, .btn-mahalle-kirmizi.active { background: #EF4444; border-color: #EF4444; color: white; }

    .btn-mahalle-mavi { border-color: #3B82F6; color: #2563EB; }
    .btn-mahalle-mavi:hover, .btn-mahalle-mavi.active { background: #3B82F6; border-color: #3B82F6; color: white; }

    .btn-mahalle-sari { border-color: #EAB308; color: #A16207; }
    .btn-mahalle-sari:hover, .btn-mahalle-sari.active { background: #EAB308; border-color: #EAB308; color: white; }

    .btn-mahalle-beyaz { border-color: #D1D5DB; color: #374151; background: white; }
    .btn-mahalle-beyaz:hover, .btn-mahalle-beyaz.active { background: #F3F4F6; border-color: #9CA3AF; color: #111827; }

    /* Grup ayƒ±rƒ±cƒ± */
    .grup-ayirici {
      width: 100%;
      height: 1px;
      background: #E5E7EB;
      margin: 0.5rem 0;
    }


    .mahalle-detail {
      margin-top: 1.5rem;
      border-top: 1px solid #E8E8E8;
      padding-top: 1.5rem;
    }

    .mahalle-detail-title {
      font-size: 1.2rem;
      font-weight: 700;
      color: #FF6000;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .btn-geri {
      background: none;
      border: none;
      font-size: 1.1rem;
      cursor: pointer;
      color: #6B7280;
      padding: 0;
    }

    .btn-geri:hover { color: #FF6000; }

    .sokak-item {
      background: #FAFAFA;
      border: 1px solid #E8E8E8;
      border-radius: 0.5rem;
      padding: 0.75rem 1rem;
      margin-bottom: 0.4rem;
      font-weight: 600;
      color: #2D2D2D;
      text-transform: capitalize;
      transition: all 0.2s;
    }

    .sokak-item:hover {
      border-color: #FF6000;
      background: white;
      transform: translateX(4px);
      color: #FF6000;
    }
    
    .logo-container {
      position: fixed;
      bottom: 20px;
      right: 20px;
      text-align: right;
      z-index: 1000;
    }
    
    .logo-trendyol {
      font-family: Arial, sans-serif;
      font-weight: bold;
      line-height: 1.2;
      margin-bottom: 5px;
    }
    
    .logo-trendyol-main {
      color: #000;
      font-size: 28px;
      letter-spacing: -1px;
    }
    
    .logo-trendyol-express {
      color: #FF6000;
      font-size: 24px;
      letter-spacing: -0.5px;
    }
    
    .logo-subtitle {
      color: #6B7280;
      font-size: 12px;
      font-weight: normal;
      margin-top: 2px;
    }
    

    /* Modal overlay */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 999;
      padding: 1rem;
    }

    .modal-overlay.hidden { display: none; }

    .modal-box {
      background: white;
      border-radius: 1rem;
      width: 100%;
      max-width: 420px;
      max-height: 80vh;
      display: flex;
      flex-direction: column;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      overflow: hidden;
    }

    .modal-header {
      background: #FF6000;
      color: white;
      padding: 1.25rem 1.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .modal-header-title {
      font-size: clamp(0.75rem, 3.5vw, 1.1rem);
      font-weight: 700;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      flex: 1;
    }

    .modal-close {
      background: rgba(255,255,255,0.2);
      border: none;
      color: white;
      font-size: 1.2rem;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0;
      line-height: 1;
    }

    .modal-close:hover { background: rgba(255,255,255,0.35); }

    .modal-body {
      overflow-y: auto;
      padding: 1.25rem;
    }

    .modal-sokak-item {
      background: #FAFAFA;
      border: 1px solid #E8E8E8;
      border-radius: 0.5rem;
      padding: 0.7rem 1rem;
      margin-bottom: 0.4rem;
      font-weight: 600;
      font-size: 1.05rem;
      color: #2D2D2D;
      text-transform: capitalize;
      transition: all 0.2s;
    }

    .modal-sokak-item:hover {
      border-color: #FF6000;
      background: #FFF5EF;
      color: #FF6000;
      transform: translateX(4px);
    }


    .grup-nav {
      display: flex;
      justify-content: center;
      gap: 1.25rem;
      margin-top: 1rem;
    }

    .btn-grup {
      width: 40px;
      height: 40px;
      border-radius: 6px;
      border: 2px solid;
      font-weight: 700;
      font-size: 0.95rem;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0;
    }

    .btn-grup:hover { opacity: 0.8; transform: scale(1.1); }

    .btn-grup-gri   { border-color: #9CA3AF; color: #4B5563; background: white; }
    .btn-grup-yesil { border-color: #15803D; color: #14532D; background: white; }
    .btn-grup-kirmizi { border-color: #EF4444; color: #DC2626; background: white; }
    .btn-grup-mavi  { border-color: #3B82F6; color: #2563EB; background: white; }
    .btn-grup-sari  { border-color: #EAB308; color: #A16207; background: white; }
    .btn-grup-beyaz { border-color: #D1D5DB; color: #374151; background: white; }

    .btn-grup-gri:hover   { background: #9CA3AF; color: white; }
    .btn-grup-yesil:hover { background: #15803D; color: white; }
    .btn-grup-kirmizi:hover { background: #EF4444; color: white; }
    .btn-grup-mavi:hover  { background: #3B82F6; color: white; }
    .btn-grup-sari:hover  { background: #EAB308; color: white; }
    .btn-grup-beyaz:hover { background: #E5E7EB; color: #111827; }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Ba≈ülƒ±k -->
    <div class="header">
      <div style="display:flex; align-items:center; justify-content:center; gap:0.6rem; margin-bottom:0.5rem;">
        <svg style="width:28px;height:28px;flex-shrink:0;" fill="none" stroke="#FF6000" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
        </svg>
        <div style="line-height:1.1; text-shadow: 1px 1px 3px rgba(0,0,0,0.2);">
          <span style="font-size:1.6rem; font-weight:900; color:#000; letter-spacing:-1px;">trendyol</span><span style="font-size:1.6rem; font-weight:900; color:#FF6000; letter-spacing:-0.5px;"> express</span>
        </div>
      </div>
      <h1>Sokak - Mahalle Bulucu</h1>
      <p class="subtitle">Sokak adƒ±nƒ± girin, mahallesini √∂ƒürenin</p>
      <div class="grup-nav">
        <button class="btn-grup btn-grup-gri" onclick="grubaGit(0)">1</button>
        <button class="btn-grup btn-grup-yesil" onclick="grubaGit(1)">2</button>
        <button class="btn-grup btn-grup-kirmizi" onclick="grubaGit(2)">3</button>
        <button class="btn-grup btn-grup-mavi" onclick="grubaGit(3)">4</button>
        <button class="btn-grup btn-grup-sari" onclick="grubaGit(4)">5</button>
        <button class="btn-grup btn-grup-beyaz" onclick="grubaGit(5)">6</button>
      </div>
    </div>

    <!-- Ana B√∂l√ºm -->
    <div class="main">
      <label>Sokak Adƒ±</label>
      <input type="text" id="sokakInput" placeholder="√ñrn: Ko√ß Sokak">
      
      <div class="buttons">
        <button class="btn-search" onclick="ara()">üîç Ara</button>
        <button class="btn-voice" id="voiceBtn" onclick="sesliAra()">üé§</button>
        <button class="btn-clear" onclick="temizle()">Temizle</button>
      </div>
    </div>

    <!-- Sonu√ß -->
    <div id="result" class="result hidden"></div>

    <!-- Mahalleler -->
    <div class="mahalle-section">
      <div class="mahalle-section-title">üèòÔ∏è Mahalleler</div>
      <div class="mahalle-buttons" id="mahalleButtons"></div>

    </div>
  </div>

  <!-- Modal -->
  <div class="modal-overlay hidden" id="modalOverlay" onclick="modalKapat(event)">
    <div class="modal-box">
      <div class="modal-header">
        <div class="modal-header-title" id="modalBaslik"></div>
        <button class="modal-close" onclick="geriDon()">‚úï</button>
      </div>
      <div class="modal-body" id="modalBody"></div>
    </div>
  </div>

  <!-- Logo - Saƒü Alt -->
  <div class="logo-container">
    <div class="logo-trendyol">
      <div class="logo-trendyol-main">trendyol</div>
      <div class="logo-trendyol-express">express</div>
    </div>
    <div class="logo-subtitle">UZUN ≈ûUBE AI</div>
  </div>

  <script>
    // Sokak veritabanƒ±
    const sokaklar = {
      'yemeni sokak': 'Ertuƒürul Gazi',
      '√ßayƒ±r sokak': 'Dumlupƒ±nar 2',
      'sekbanlƒ± sokak': 'Ataevler',
      'g√∂ksun sokak': 'ƒ∞stasyon 1',
      'cami sokak': 'Tepecik',
      'hafƒ±z binba≈üƒ± sokak': 'Karaba≈ü 3',
      'y√ºce rƒ±fat sokak': 'K√∂rfez 1',
      'berk sokak': 'K√∂rfez 2',
      'ko√ß sokak': 'Uzun√ßiftlik',
      'saklƒ± sokak': 'Emekevler 1',
      'asker sokak': 'Emekevler 2',
      'a≈ühane sokak': 'Ataevler 1',
      'sarvan sokak': 'Ataevler 2',
      'faruk nafƒ±z √ßamlƒ±bel sokak': 'Ataevler 3',
      'efsane sokak': 'E≈üme',
      'imar caddesi': 'ƒ∞brikdere',
      'firuze caddesi': 'Uzuntarla',
      'g√∂kbudak sokak': 'Ertuƒürul Gazi',
      'ozan sokak': 'Dumlupƒ±nar 1',
      'hazer sokak': 'Dumlupƒ±nar 2',
      's√ºleyman pa≈üa sokak': 'Karaba≈ü 1',
      'rauf orbay sokak': 'Karaba≈ü 2',
      'tepecik sokak': 'Tepecik',
      'uƒüur sokak': 'ƒ∞stasyon 1',
      '√ßilem sokak': 'ƒ∞stasyon 3',
      'erdemli sokak': 'ƒ∞stasyon 2',
      'g√∂kmen sokak': 'K√∂sek√∂y 1',
      'ta≈ükƒ±n sokak': 'FSM 1',
      'g√ºla√ßtƒ± sokak': 'FSM 2',
      'egemen sokak': 'FSM 3',
      'yadigar sokak': 'Sarƒ±me≈üe 1',
      'mukaddes sokak': 'Sarƒ±me≈üe 2',
      '√ßeltikd√ºz√º sokak': 'Arslanbey 1',
      'emrah sokak': 'Rahmiye',
      'ate≈ü sokak': 'Ma≈üukiye',
      'ovalƒ± sokak': 'Acƒ±su 1',
      'kƒ±r sokak': 'Derbent',
      'ender sokak': 'Acƒ±su 2',
      'bah√ßelievler sokak': 'Suadiye',
      'habiloƒülu sokak': '√áepni',
      'g√ºlova sokak': '≈ûevkatiye',
      'kele≈üli sokak': 'Balaban',
      'be≈üikta≈ü sokak': '≈ûirinsulhiye',
      'atabey sokak': 'Arslanbey 2',
      'latif bey sokak': '√ñmeraƒüa 1'
    };


    // Mahalle sorumlularƒ±
    const mahalleSorumlulari = {
      'Acƒ±su 1': 'Enes Durmu≈ü',
      'Ma≈üukiye': 'Enes Durmu≈ü',
      'Arslanbey 1': 'Abd√ºlkadir Selvi',
      'Rahmiye': 'Abd√ºlkadir Selvi',
      'Balaban': 'Muhammet ƒ∞brahimoƒülu',
      'Derbent': 'Selim Yƒ±ldƒ±z',
      'Acƒ±su 2': 'Selim Yƒ±ldƒ±z',
      'Suadiye': 'Kadir Yƒ±ldƒ±z',
      '√áepni': 'Kadir Yƒ±ldƒ±z',
      '≈ûevkatiye': 'Berk Semerci',
      'Arslanbey 2': 'Berk Semerci',
      'Ataevler 1': 'Yal√ßƒ±n Aky√ºz',
      'Emekevler 2': 'Yal√ßƒ±n Aky√ºz',
      'Ataevler 2': 'Furkan √ñzbay',
      'Ataevler 3': 'Furkan Kaynak',
      'Uzun√ßiftlik': 'H√ºseyin √ñreng√ºl',
      'Dumlupƒ±nar 1': 'Osman √ñreng√ºl',
      'Dumlupƒ±nar 2': 'Tolga √ñreng√ºl',
      'Ertuƒürul Gazi': 'Burak √ñzer',
      'E≈üme': 'Semih ≈ûim≈üek',
      'ƒ∞brikdere': 'Semih ≈ûim≈üek',
      'Uzuntarla': 'Semih ≈ûim≈üek',
      'FSM 1': 'ƒ∞brahim G√∂kƒ±rmak',
      'FSM 2': 'Arif Emre',
      'Sarƒ±me≈üe 2': 'Arif Emre',
      'FSM 3': 'Ali Durmu≈ü',
      'K√∂sek√∂y 1': 'Burak G√ºler',
      'ƒ∞stasyon 1': 'ƒ∞dris Maden',
      'ƒ∞stasyon 2': 'ƒ∞brahim G√∂kƒ±rmak',
      'ƒ∞stasyon 3': 'Arif Emre Teper',
      'Karaba≈ü 1': 'Bilal U√ßar',
      'Karaba≈ü 2': 'Ey√ºp Kƒ±lƒ±√ß',
      'Karaba≈ü 3': 'Kenan Oru√ß',
      'K√∂rfez 1': 'Kenan Oru√ß',
      'Tepecik': 'Zeki Kanpara',
      'K√∂rfez 2': 'Mustafa Tayyip',
      'Emekevler 1': 'Ey√ºp Gen√ßt√ºrk',
      'Sarƒ±me≈üe 1': '≈ûaban √ñz',
      '≈ûirinsulhiye': 'Muhammet ƒ∞brahimoƒülu',
      '√ñmeraƒüa 1': 'Bilal U√ßar'
    };

    function sorumluGetir(mahalle) {
      return mahalleSorumlulari[mahalle] || mahalle;
    }

    let dinliyor = false;

    // Enter tu≈üuyla arama
    document.getElementById('sokakInput').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') ara();
    });

    // Arama fonksiyonu
    function ara() {
      const input = document.getElementById('sokakInput').value;
      const aranan = input.toLowerCase().trim();
      const resultDiv = document.getElementById('result');

      if (!aranan) {
        gosterSonuc('error', '‚ùå Uyarƒ±', 'L√ºtfen bir sokak adƒ± girin!');
        return;
      }

      // √ñnce tam e≈üle≈üme dene
      let mahalle = sokaklar[aranan];
      let bulunanSokak = aranan;

      // Tam e≈üle≈üme yoksa "sokak" ve "caddesi" ekleyerek dene
      if (!mahalle) {
        const denemeler = [aranan + ' sokak', aranan + ' caddesi'];
        for (const deneme of denemeler) {
          if (sokaklar[deneme]) {
            mahalle = sokaklar[deneme];
            bulunanSokak = deneme;
            break;
          }
        }
      }

      // Hala bulunamadƒ±ysa kƒ±smi e≈üle≈üme dene
      if (!mahalle) {
        for (const [sokak, mah] of Object.entries(sokaklar)) {
          if (sokak.startsWith(aranan)) {
            mahalle = mah;
            bulunanSokak = sokak;
            break;
          }
        }
      }

      if (mahalle) {
        const gosterilen = bulunanSokak.charAt(0).toUpperCase() + bulunanSokak.slice(1);
        gosterSonuc('success', '‚úÖ Bulundu!', 
          `<div class="sokak-name">${gosterilen}</div><div class="mahalle-name">${mahalle}</div>`);
        sesliSoyle(sorumluGetir(mahalle));
      } else {
        gosterSonuc('warning', '‚ö†Ô∏è Bulunamadƒ±', 'Bu sokak veritabanƒ±nda bulunamadƒ±.');
      }
    }

    // Sesli konu≈üma fonksiyonu
    function sesliSoyle(metin) {
      // √ñnceki konu≈ümalarƒ± iptal et
      window.speechSynthesis.cancel();
      
      const utterance = new SpeechSynthesisUtterance(metin);
      utterance.lang = 'tr-TR';
      utterance.rate = 1.1; // Konu≈üma hƒ±zƒ±nƒ± artƒ±rdƒ±k
      utterance.pitch = 1;
      utterance.volume = 1;
      
      // Hemen konu≈ü
      window.speechSynthesis.speak(utterance);
    }

    // Sesli arama
    function sesliAra() {
      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      
      if (!SpeechRecognition) {
        gosterSonuc('error', '‚ùå Uyarƒ±', 'Tarayƒ±cƒ±nƒ±z ses tanƒ±mayƒ± desteklemiyor. L√ºtfen Chrome veya Edge kullanƒ±n.');
        sesliSoyle('Tarayƒ±cƒ±nƒ±z ses tanƒ±mayƒ± desteklemiyor.');
        return;
      }

      const recognition = new SpeechRecognition();
      recognition.lang = 'tr-TR';
      recognition.continuous = false;
      recognition.interimResults = false;

      const voiceBtn = document.getElementById('voiceBtn');

      recognition.onstart = () => {
        dinliyor = true;
        voiceBtn.classList.add('listening');
        voiceBtn.textContent = 'üî¥ Dinliyor...';
        gosterSonuc('listening', 'üé§ Dinliyorum', 'Sokak adƒ±nƒ± s√∂yleyin...');
      };

      recognition.onresult = (event) => {
        const sesliBilgi = event.results[0][0].transcript;
        document.getElementById('sokakInput').value = sesliBilgi;
        
        const aranan = sesliBilgi.toLowerCase().trim();
        const mahalle = sokaklar[aranan];

        if (mahalle) {
          gosterSonuc('success', '‚úÖ Bulundu!', 
            `<div class="sokak-name">${sesliBilgi}</div><div class="mahalle-name">${mahalle}</div>`);
          sesliSoyle(sorumluGetir(mahalle));
        } else {
          gosterSonuc('warning', '‚ö†Ô∏è Bulunamadƒ±', 'Bu sokak veritabanƒ±nda bulunamadƒ±.');
          sesliSoyle('Bulunamadƒ±');
        }
      };

      recognition.onerror = () => {
        gosterSonuc('error', '‚ùå Hata', 'Ses tanƒ±ma hatasƒ±. L√ºtfen tekrar deneyin.');
        sesliSoyle('Ses tanƒ±ma hatasƒ±. L√ºtfen tekrar deneyin.');
      };

      recognition.onend = () => {
        dinliyor = false;
        voiceBtn.classList.remove('listening');
        voiceBtn.textContent = 'üé§';
      };

      recognition.start();
    }

    // Temizle
    function temizle() {
      document.getElementById('sokakInput').value = '';
      document.getElementById('result').classList.add('hidden');
    }

    // Sonu√ß g√∂ster
    function gosterSonuc(tip, baslik, mesaj) {
      const resultDiv = document.getElementById('result');
      const tipClass = `result-${tip}`;
      const titleClass = `${tip}-title`;

      resultDiv.innerHTML = `
        <div class="result-box ${tipClass}">
          <div class="result-title ${titleClass}">${baslik}</div>
          <div>${mesaj}</div>
        </div>
      `;
      resultDiv.classList.remove('hidden');
    }

    // Mahalleleri grupla
    function mahalleSokakMap() {
      const map = {};
      Object.entries(sokaklar).forEach(([sokak, mahalle]) => {
        if (!map[mahalle]) map[mahalle] = [];
        map[mahalle].push(sokak);
      });
      return map;
    }

    // Mahalle gruplarƒ±
    const mahalleGruplari = [
      {
        renk: 'gri',
        mahalleler: ['Acƒ±su 1', 'Acƒ±su 2', 'Arslanbey 1', 'Arslanbey 2', 'Balaban', 'Derbent', 'Ma≈üukiye', 'Rahmiye', 'Suadiye', '√áepni', '≈ûevkatiye', '≈ûirinsulhiye']
      },
      {
        renk: 'yesil',
        mahalleler: ['Ataevler 1', 'Ataevler 2', 'Ataevler 3', 'Emekevler 1', 'Emekevler 2', 'Uzun√ßiftlik']
      },
      {
        renk: 'kirmizi',
        mahalleler: ['Dumlupƒ±nar 1', 'Dumlupƒ±nar 2', 'Ertuƒürul Gazi', 'E≈üme', 'ƒ∞brikdere', 'Uzuntarla']
      },
      {
        renk: 'mavi',
        mahalleler: ['FSM 1', 'FSM 2', 'FSM 3', 'K√∂sek√∂y 1', 'Sarƒ±me≈üe 1', 'Sarƒ±me≈üe 2', 'ƒ∞stasyon 1', 'ƒ∞stasyon 2', 'ƒ∞stasyon 3']
      },
      {
        renk: 'sari',
        mahalleler: ['Karaba≈ü 1', 'Karaba≈ü 2', 'Tepecik', '√ñmeraƒüa 1']
      },
      {
        renk: 'beyaz',
        mahalleler: ['K√∂rfez 1', 'K√∂rfez 2', 'Karaba≈ü 3']
      }
    ];

    // Mahalle butonlarƒ±nƒ± gruplu olu≈ütur
    function mahalleButonlariOlustur() {
      const map = mahalleSokakMap();
      const container = document.getElementById('mahalleButtons');
      
      mahalleGruplari.forEach((grup, idx) => {
        if (idx > 0) {
          const sep = document.createElement('div');
          sep.className = 'grup-ayirici';
          container.appendChild(sep);
        }
        let firstBtn = true;
        grup.mahalleler.forEach(mahalle => {
          if (!map[mahalle]) return;
          const btn = document.createElement('button');
          btn.className = 'btn-mahalle btn-mahalle-' + grup.renk;
          btn.textContent = mahalle;
          btn.onclick = () => mahalleAc(mahalle, btn);
          if (firstBtn) {
            btn.id = 'grup-anchor-' + idx;
            firstBtn = false;
          }
          container.appendChild(btn);
        });
      });
    }

    // Gruba git
    function grubaGit(idx) {
      const anchor = document.getElementById('grup-anchor-' + idx);
      if (anchor) {
        anchor.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    }

    // Mahalle detayƒ±nƒ± modal olarak a√ß
    function mahalleAc(mahalle, btnEl) {
      document.querySelectorAll('.btn-mahalle').forEach(b => b.classList.remove('active'));
      btnEl.classList.add('active');

      const map = mahalleSokakMap();
      const sokakListesi = map[mahalle] || [];

      const sorumlu = mahalleSorumlulari[mahalle];
      const baslik = sorumlu ? mahalle + ' - ' + sorumlu : mahalle;
      document.getElementById('modalBaslik').textContent = baslik;
      const body = document.getElementById('modalBody');
      body.innerHTML = '';
      sokakListesi.forEach(sokak => {
        const div = document.createElement('div');
        div.className = 'modal-sokak-item';
        div.textContent = sokak;
        body.appendChild(div);
      });

      document.getElementById('modalOverlay').classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    }

    // Modalƒ± kapat
    function geriDon() {
      document.getElementById('modalOverlay').classList.add('hidden');
      document.body.style.overflow = '';
      document.querySelectorAll('.btn-mahalle').forEach(b => b.classList.remove('active'));
    }

    // Overlay dƒ±≈üƒ±na tƒ±klayƒ±nca kapat
    function modalKapat(event) {
      if (event.target === document.getElementById('modalOverlay')) {
        geriDon();
      }
    }

    // Sayfa y√ºklendiƒüinde butonlarƒ± olu≈ütur
    mahalleButonlariOlustur();
  </script>
</body>
</html>
