<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sokak Mahalle Bulucu</title>

<style>
body{
  font-family: Arial, sans-serif;
  background:#f3f4f6;
  padding:20px;
}
.container{
  max-width:500px;
  margin:auto;
  background:#fff;
  padding:20px;
  border-radius:12px;
  box-shadow:0 5px 15px rgba(0,0,0,.1);
}
input{
  width:100%;
  padding:12px;
  font-size:16px;
}
button{
  margin-top:10px;
  padding:10px;
  font-size:16px;
  cursor:pointer;
}
.result{
  margin-top:20px;
  padding:15px;
  border-radius:8px;
}
.success{background:#e6fffa}
.warning{background:#fff7ed}
</style>
</head>

<body>

<div class="container">
  <h2>Sokak ‚Üí Mahalle Bulucu</h2>

  <input id="sokakInput" placeholder="Yemeni / Yemeni Sokak">

  <button onclick="ara()">üîç Ara</button>
  <button onclick="sesliAra()">üé§ Sesli</button>

  <div id="result" class="result"></div>
</div>

<script>
/* ===============================
   SOKAK VERƒ∞TABANI
================================ */
const sokaklar = {
  "yemeni sokak": "Ertuƒürul Gazi Mahallesi",
  "√ßayƒ±r sokak": "Dumlupƒ±nar Mahallesi",
  "sekbanlƒ± sokak": "Ataevler Mahallesi",
  "g√∂ksun sokak": "ƒ∞stasyon Mahallesi"
};

/* ===============================
   AKILLI NORMALIZE
================================ */
function normalize(text){
  return text
    .toLowerCase()
    // soru kelimelerini temizle
    .replace(/hangi|mahallede|nerede|nedir|s√∂yle|s√∂yler misin|acaba/g, "")
    // sokak kƒ±saltmalarƒ±
    .replace(/sok\.?/g, "sokak")
    .replace(/sk/g, "sokak")
    // fazla bo≈üluk
    .replace(/\s+/g, " ")
    .trim();
}

/* ===============================
   ARAMA
================================ */
function ara(){
  const input = document.getElementById("sokakInput").value;
  const q = normalize(input);
  const result = document.getElementById("result");

  if(!q){
    result.className="result warning";
    result.innerHTML="L√ºtfen sokak adƒ± girin";
    return;
  }

  // 1Ô∏è‚É£ Tam e≈üle≈üme
  if(sokaklar[q]){
    sonucGoster(q, sokaklar[q]);
    konus(sokaklar[q]);
    return;
  }

  // 2Ô∏è‚É£ Kƒ±smi e≈üle≈üme (yemeni ‚Üí yemeni sokak)
  const eslesen = Object.keys(sokaklar).find(s =>
    s.includes(q) || q.includes(s.replace(" sokak",""))
  );

  if(eslesen){
    sonucGoster(eslesen, sokaklar[eslesen]);
    konus(sokaklar[eslesen]);
  }else{
    result.className="result warning";
    result.innerHTML="Bu sokak veritabanƒ±nda bulunamadƒ±";
  }
}

/* ===============================
   SONU√á G√ñSTER
================================ */
function sonucGoster(sokak, mahalle){
  const result = document.getElementById("result");
  result.className="result success";
  result.innerHTML = `<b>${sokak}</b><br>${mahalle}`;
}

/* ===============================
   SESLƒ∞ OKUMA
================================ */
function konus(metin){
  speechSynthesis.cancel();
  const u = new SpeechSynthesisUtterance(metin);
  u.lang="tr-TR";
  speechSynthesis.speak(u);
}

/* ===============================
   SESLƒ∞ ARAMA
================================ */
function sesliAra(){
  const R = window.SpeechRecognition || window.webkitSpeechRecognition;
  if(!R){
    alert("Tarayƒ±cƒ± ses tanƒ±mayƒ± desteklemiyor");
    return;
  }

  const r = new R();
  r.lang="tr-TR";

  r.onresult = e=>{
    const metin = e.results[0][0].transcript;
    document.getElementById("sokakInput").value = metin;
    ara();
  };

  r.start();
}
</script>

</body>
</html>
